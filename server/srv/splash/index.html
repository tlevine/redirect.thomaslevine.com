<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		
		<title></title>

		<!-- Meta tags -->
		<meta name="description" content="" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<!-- Don't forget to update the bookmark icons (favicon.ico and apple-touch-icons) in the root: http://mathiasbynens.be/notes/touch-icons -->

		<!-- CSS -->
		<link rel="stylesheet" href="assets/css/main.css?version=1" />

		<!-- JavaScript -->
		<!--[if IE]><![endif]-->
		<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<script src="assets/js/respond.min.js"></script>
	</head>
	<body>
		<div id="main">
			<h1>Chasing the wild goose</h1>
			<p>
				Let's say I want example.com to redirect to
				www.example.com. This is what I do.
			</p>
			<ol>
				<li>Fill out this form.</li>
				<li>Tell my DNS provider to point <span class=address>example.com</span> to "<span class=address>108.174.51.19</span>"</li>
				<li>Wait a couple days for the DNS information to propogate.</li>
			</ol>
			<p>
				After that, <span class=address>example.com</span> will be forwarded to <span class=address>www.example.com</span>.
			</p>
			<noscript>The form requires JavaScript, but your browser doesn't allow it :(</noscript>
			<form id="make-redirect" style="display: none;">
				<input type="text" id="from" name="from" placeholder="example.com"></input>
				<input type="text" id="to"  name="to" placeholder="www.example.com"></input>
				<input type="text" id="email" name="email" placeholder="example.com"></input>
				<p id="show-advanced">Show advanced options.</p>
				<div id="advanced" style="display: none;">
					<label for="status_code">Status code for the redirect</label>
					<select name="status_code">
						<option value="301">301 Moved permanently</option>
						<option value="303" selected>303 See other</option>
					</select>
					<label for="redirect_url">URL of an existing redirect if you want to update it</label>
					<input id="redirect_url" type="text" name="redirect_url"></input>
				</div>
			</form>
			<button id="create">Go</button>
			<p>Read more <a href="https://github.com/tlevine/redirect.thomaslevine.com">here</a>.</p>
		</div>

		<script src="assets/js/jquery.js"></script>
		<script src="assets/js/uuid.js"></script>
		<script>
			// Select the form
			var f = $('#make-redirect');

			// Choose a box identifier.
			$('#redirect_url').attr('value', 'http://redirect.thomaslevine.com/v1/' + uuid.v1());

			// Submit the form.
			$('#create').click(function(){
			  var action = $('#redirect_url').val();

			  // Submit
			  $.ajax({
			    url: action,
			    type: 'put',
			    data: f.serialize()
			  });
			});

			// Display advanced options
			$('#show-advanced').click(function(){
			  $('#advanced').attr('style', '');
			  $('#show-advanced').hide();
			});

			// Display the form.
			f.attr('style', '');
		</script>
	</body>
</html>
